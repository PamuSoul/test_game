# Phaser 事件冒險遊戲 - 完整版

這是一個使用 Phaser 3 製作的多場景手機遊戲，具有完整的金錢系統、強化系統和持久化存檔功能。

## 🎮 遊戲特色

### 📱 **移動優化設計**
- **直立式螢幕**：375x667 像素，完美適配手機
- **觸控優化**：大按鈕設計，適合手指操作
- **響應式佈局**：自動適應不同螢幕尺寸
- **多場景系統**：首頁、遊戲、強化三個場景

### 💰 **金錢與強化系統**
- **持久化金錢**：金錢存儲在本地，重啟遊戲不會消失
- **戰鬥獎勵**：擊敗敵人獲得金錢獎勵
- **強化中心**：使用金錢永久提升角色能力
- **動態定價**：強化費用隨次數遞增

### ⚔️ **戰鬥與事件系統**
- **17種事件**：包含敵人戰鬥、寶物發現、強化機會
- **權重系統**：不同事件有不同出現機率
- **敵人掉落**：與敵人戰鬥會獲得金錢補償
- **即死機制**：極稀有的死神事件

### 🏥 **血量系統**
- **基礎血量**：100點起始生命值
- **永久強化**：可用金錢提升最大血量
- **動態顯示**：血量條顏色隨血量變化
- **重置機制**：死亡後可重新開始

## 🎯 場景系統

### 🏠 **首頁場景 (StartScene)**
- 遊戲標題和背景
- 金錢顯示（右上角黑色方框）
- 開始遊戲按鈕（中央綠色）
- 強化按鈕（左下角紅色）
- 裝備按鈕（右下角紫色，暫未實裝）

### 🎮 **遊戲場景 (GameScene)**
- 關卡顯示（頂部中央）
- 血量系統（血量條和數值）
- 金錢顯示（右上角）
- 玩家角色（左下角）
- 事件文字框（中下方）
- 下一關/重新開始按鈕（底部）

### 💪 **強化場景 (UpgradeScene)**
- 強化選項列表
- 費用和效果說明
- 購買按鈕（根據金錢啟用/禁用）
- 返回按鈕

## 📊 螢幕佈局

```
┌─────────────────────────────┐
│                    💰 999   │ ← 金錢顯示
│         第 X 關             │ ← 關卡
│      血量: 100/120          │ ← 血量文字
│    ████████████████         │ ← 血量條
│                             │
│  👤                         │ ← 玩家角色
│                             │
│  ┌─────────────────────┐    │
│  │                     │    │ ← 事件文字框
│  │     事件內容        │    │
│  │                     │    │
│  └─────────────────────┘    │
│                             │
│       [下一關]              │ ← 操作按鈕
│                             │
│  [強化]          [裝備]     │ ← 首頁功能按鈕
└─────────────────────────────┘
```

## 💰 金錢系統詳解

### � **獲得金錢方式**
- **敵人戰鬥**：擊敗各種敵人獲得10-50金錢
- **事件獎勵**：某些正面事件也會給予金錢

### 🏪 **金錢用途**
- **生命值強化**：永久提升最大生命值+10
- **費用遞增**：第1次50金，第2次75金，第3次100金...

### 💾 **持久化存儲**
- 使用瀏覽器 localStorage 保存
- 重新開始遊戲不會重置金錢
- 強化效果永久生效

## ⚔️ 完整事件列表

### � **敵人事件** (掉落金錢)
- **遭遇怪物**：-30血量，+15金錢
- **詛咒石碑**：-25血量，+12金錢（擊敗守護者）
- **盜賊襲擊**：-20血量，+25金錢
- **野狼群**：-35血量，+10金錢
- **哥布林商隊**：-15血量，+30金錢
- **龍族幼崽**：+10血量，+50金錢（友善）

### � **寶物事件**
- **找到寶箱**：+20血量
- **魔法泉水**：完全恢復血量
- **友善商人**：+25血量
- **聖光祝福**：+35血量

### 😵 **危險事件**
- **陷阱**：-15血量
- **毒霧**：-20血量

### ⭐ **強化事件** (提升最大血量)
- **生命精華**：最大血量+20，恢復20血量
- **古老神廟**：最大血量+15，恢復30血量
- **龍血寶石**：最大血量+30，恢復50血量
- **生命之樹**：最大血量+25，完全恢復血量

### ⚠️ **詛咒事件**
- **惡魔契約**：最大血量-10，恢復10血量

### 💀 **即死事件**
- **死神的鐮刀**：即死（極稀有）

## 🔧 技術規格

- **遊戲引擎**：Phaser 3.70.0
- **畫面尺寸**：375x667 像素 (直立式)
- **縮放模式**：FIT + 居中
- **語言**：JavaScript (ES6)
- **存儲**：localStorage (瀏覽器本地存儲)
- **場景管理**：多場景架構

## 📁 完整檔案結構

```
test_game/
├── index.html              # 主HTML文件
├── game_fixed.js          # 主要遊戲邏輯
├── events.js              # 事件資料庫
├── assets/                # 資源資料夾
│   ├── images/           # 圖片資源
│   │   ├── player.png    # 玩家角色
│   │   ├── background.jpg # 遊戲背景
│   │   └── README.md     # 圖片說明
│   └── music/            # 音頻資源
│       ├── *.mp3         # 各種音效
│       └── README.md     # 音頻說明
├── README.md             # 本說明文件
├── events-readme.md      # 事件系統說明
├── ASSETS_GUIDE.md       # 資源指南
└── MOBILE_DEPLOYMENT.md  # 手機部署指南
```

## 🎮 遊戲玩法

### 🚀 **基本流程**
1. **首頁**：查看金錢，選擇開始遊戲或強化角色
2. **強化**：使用金錢永久提升最大生命值
3. **冒險**：進入遊戲場景開始事件冒險
4. **戰鬥**：與敵人戰鬥獲得金錢和經驗
5. **死亡**：血量歸零後可重新開始，金錢和強化保留

### 💪 **強化系統**
- 在首頁點擊「強化」進入強化中心
- 花費金錢永久提升最大生命值+10
- 費用遞增：50→75→100→125→...
- 強化效果在重新開始後依然有效

### ⚔️ **戰鬥機制**
- 遭遇敵人會減少血量但獲得金錢
- 不同敵人掉落的金錢數量不同
- 風險越高，獲得的金錢越多
- 策略性地承受傷害來累積財富

### 🎯 **血量系統**
- **基礎血量**：100點（可通過強化增加）
- **顏色變化**：
  - 綠色：血量 > 60%
  - 橙色：血量 30-60%
  - 紅色：血量 < 30%
- **背景強化顯示**：
  - 白色：標準血量（≤120）
  - 紫色：提升血量（121-150）
  - 金色：超強血量（>150）

### 🎲 **事件機率**
- 事件採用權重系統，不同事件有不同出現機率
- 基礎事件（陷阱、寶箱）較常見
- 強化事件（生命之樹、龍血寶石）極稀有
- 敵人事件平衡風險與獎勵

## 🚀 如何運行

### 🌐 **本地運行**
1. 下載所有檔案到同一資料夾
2. 使用本地伺服器運行：
   ```bash
   # 使用 Python 3
   python3 -m http.server 8080
   
   # 使用 Node.js
   npx http-server
   ```
3. 在瀏覽器訪問 `http://localhost:8080`

### 📱 **手機測試**
1. 確保手機和電腦在同一網路
2. 在手機瀏覽器訪問電腦的IP地址
3. 例如：`http://192.168.1.100:8080`

### 🔧 **開發模式**
- 開啟瀏覽器開發者工具查看除錯訊息
- 檢查 localStorage 查看存儲的金錢和強化數據
- 修改程式碼後重新整理頁面即可測試

## 💾 存檔系統

### 🗄️ **本地存儲**
遊戲使用瀏覽器的 localStorage 保存以下數據：
- `gamePlayerMoney`：玩家金錢
- `healthUpgrades`：生命值強化次數
- `baseMaxHealth`：基礎最大生命值

### 🔄 **數據管理**
- **自動保存**：獲得金錢或購買強化時自動保存
- **跨場景**：所有場景共享相同的存檔數據
- **持久性**：關閉瀏覽器後數據依然保留
- **重置**：清除瀏覽器數據可重置進度

## 🎨 自訂功能

### 📝 **添加新事件**
在 `events.js` 中的 `gameEvents` 陣列添加新事件：
```javascript
{
    name: "新事件名稱",
    description: "事件描述",
    effect: { 
        health: 10,      // 血量變化
        money: 20,       // 金錢獎勵
        message: "效果訊息" 
    },
    weight: 5           // 出現權重
}
```

### 🎵 **添加音效**
將音頻檔案放入 `assets/music/` 資料夾，遊戲會自動嘗試載入。

### 🖼️ **更換圖片**
將新圖片放入 `assets/images/` 資料夾，確保檔名正確。

### 💰 **調整經濟系統**
修改 `UpgradeScene` 中的 `getHealthUpgradeCost()` 函數來調整強化費用。

祝您遊戲愉快！🎮