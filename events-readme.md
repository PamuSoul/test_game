# 事件資料庫檔案 (events.js)

這個檔案包含了遊戲中所有的事件資料，包括敵人戰鬥、寶物發現、強化機會等17個事件。

## 📊 遊戲統計

### 🎯 事件類型分布
- **戰鬥事件**: 5個 (29.4%) - 進入戰鬥系統
- **商店事件**: 3個 (17.6%) - 花金錢購買道具
- **探索事件**: 9個 (52.9%) - 獲得金錢或血量
- **總計**: 17個事件

### ⚔️ 戰鬥事件統計
- **總怪物類型**: 5種
- **平均怪物血量**: 38點 (25-50範圍)
- **平均戰鬥獎勵**: 26金錢 (15-40範圍)
- **最危險怪物**: 狼王 (50血量、15攻擊)
- **最安全怪物**: 哥布林戰士 (25血量、6攻擊)

### 🛒 商店事件統計  
- **道具種類**: 15種臨時強化道具
- **平均價格**: 25金錢 (10-40範圍)
- **最昂貴道具**: 龍鱗護甲 (40金錢、+15防禦)
- **最便宜道具**: 治療藥水 (10金錢、+20血量)

### 📈 風險回報分析
- **高風險高回報**: 狼王戰鬥 (40金錢獎勵)
- **穩定收益**: 野狼戰鬥 (15金錢獎勵)
- **最佳CP值**: 哥布林戰士 (最易戰勝，20金錢)

---### 💰 金錢系統事件

### ⚔️ 戰鬥事件 (回合制戰鬥)
以下事件會觸發戰鬥系統，需要與怪物進行回合制戰鬥：

| 事件名稱 | 怪物 | 怪物血量 | 怪物攻擊/防禦 | 金錢獎勵 | 權重 | 機率 |
|---------|------|----------|---------------|----------|------|------|
| 遭遇怪物 | 野狼 | 30 HP | 8攻/2防 | +15💰 | 12 | 11.2% |
| 詛咒石碑 | 石碑守護者 | 40 HP | 12攻/5防 | +25💰 | 9 | 8.4% |
| 盜賊襲擊 | 盜賊頭目 | 45 HP | 10攻/3防 | +30💰 | 8 | 7.5% |
| 野狼群 | 狼王 | 50 HP | 15攻/4防 | +40💰 | 7 | 6.5% |
| 哥布林商隊 | 哥布林戰士 | 25 HP | 6攻/1防 | +20💰 | 5 | 4.7% |

### � 非戰鬥敵人事件 (直接獎勵)
| 事件名稱 | 血量變化 | 金錢獎勵 | 權重 | 機率 |
|---------|---------|---------|------|------|
| 龍族幼崽 | +10 | +50 | 2 | 1.9% | 事件結構

每個事件都包含以下屬性：
- `name`: 事件名稱
- `description`: 事件描述文字
- `effect`: 事件效果物件
  - `health`: 血量變化 (正數恢復，負數減少)
  - `money`: 金錢獎勵 (新增)
  - `maxHealth`: 最大血量變化 (可選)
  - `fullHeal`: 是否完全恢復血量 (可選)
  - `instantDeath`: 是否即死 (可選)
  - `message`: 效果提示訊息
- `weight`: 事件權重 (影響出現機率)

## ⚖️ 權重系統

權重系統決定每個事件的出現機率：
- **權重越高 = 出現機率越高**
- **權重越低 = 出現機率越低**
- 總權重 = 所有事件權重的總和
- 每個事件的機率 = 該事件權重 ÷ 總權重

### 權重分級
- **18-15**: 非常常見 (基礎事件)
- **14-10**: 常見 (一般事件)
- **9-6**: 中等 (特殊事件)
- **5-3**: 稀有 (強化事件)
- **2-1**: 極稀有 (傳說事件)

## 🎮 完整事件列表 (17種)

### 基礎事件 (權重 18-12)
1. **陷阱** (權重 18) - 減少血量 -15 → 機率 ~16.8%
2. **找到寶箱** (權重 15) - 恢復血量 +20 → 機率 ~14.0%
3. **毒霧** (權重 14) - 減少血量 -20 → 機率 ~13.1%
4. **遭遇怪物** (權重 12) - 減少血量 -30，**獲得 15 金錢** → 機率 ~11.2%

### 一般事件 (權重 10-6)
5. **友善商人** (權重 10) - 🏪 **商店事件**：可選擇購買補血道具或裝備 → 機率 ~9.3%
6. **詛咒石碑** (權重 9) - 減少血量 -25，**獲得 12 金錢** → 機率 ~8.4%
7. **魔法泉水** (權重 8) - 完全恢復血量 → 機率 ~7.5%
8. **盜賊襲擊** (權重 8) - 減少血量 -20，**獲得 25 金錢** → 機率 ~7.5%
9. **野狼群** (權重 7) - 減少血量 -35，**獲得 10 金錢** → 機率 ~6.5%
10. **聖光祝福** (權重 6) - 恢復血量 +35 → 機率 ~5.6%

### 特殊事件 (權重 5-3)
11. **哥布林商隊** (權重 5) - 減少血量 -15，**獲得 30 金錢** → 機率 ~4.7%
12. **古老神廟** (權重 4) - 最大血量 +15，恢復 +30 → 機率 ~3.7%
13. **生命精華** (權重 3) - 最大血量 +20，恢復 +20 → 機率 ~2.8%

### 稀有事件 (權重 2-1)
14. **龍族幼崽** (權重 2) - 恢復血量 +10，**獲得 50 金錢** → 機率 ~1.9%
15. **惡魔契約** (權重 2) - 最大血量 -10，恢復 +10 → 機率 ~1.9%
16. **生命之樹** (權重 1) - 最大血量 +25，完全恢復血量 → 機率 ~0.9%
17. **死神的鐮刀** (權重 1) - **即死** → 機率 ~0.9%

## 💰 金錢系統事件

### 💸 敵人事件 (掉落金錢)
以下敵人事件會在戰鬥後給予金錢獎勵：

| 事件名稱 | 血量變化 | 金錢獎勵 | 權重 | 機率 |
|---------|---------|---------|------|------|
| 遭遇怪物 | -30 | +15 | 12 | 11.2% |
| 詛咒石碑 | -25 | +12 | 9 | 8.4% |
| 盜賊襲擊 | -20 | +25 | 8 | 7.5% |
| 野狼群 | -35 | +10 | 7 | 6.5% |
| 哥布林商隊 | -15 | +30 | 5 | 4.7% |
| 龍族幼崽 | +10 | +50 | 2 | 1.9% |

## ⚔️ 戰鬥系統詳解

### 🎮 戰鬥機制
當遇到戰鬥事件時，會觸發回合制戰鬥系統：

#### � 戰鬥流程
1. **自動戰鬥**：玩家和怪物輪流攻擊，每秒一次行動
2. **傷害計算**：攻擊力 - 防禦力 = 實際傷害（最少1點）
3. **回合限制**：最多進行30個回合
4. **勝利條件**：將怪物血量降至0
5. **失敗/逃跑**：超過30回合或玩家死亡

#### 🏆 戰鬥結果
- **玩家勝利** → 獲得金錢獎勵，可進入下一關
- **怪物逃跑** → 無獎勵，但可進入下一關  
- **玩家死亡** → 遊戲結束，重新開始

#### ⚡ 戰鬥特色
- **即時視覺回饋**：怪物血量條、戰鬥日誌
- **無下一關按鈕**：戰鬥進行中無法跳過
- **聲音效果**：攻擊和受傷音效

### 📊 怪物數據分析
| 怪物類型 | 難度評估 | 特色 |
|---------|----------|------|
| 哥布林戰士 | ⭐ 簡單 | 血量少、攻擊低、高獎勵 |
| 野狼 | ⭐⭐ 普通 | 平衡的血量和攻擊力 |
| 石碑守護者 | ⭐⭐⭐ 困難 | 高攻擊、高防禦 |
| 盜賊頭目 | ⭐⭐ 普通 | 高血量、低防禦 |
| 狼王 | ⭐⭐⭐⭐ 危險 | 最高血量和攻擊力 |

### 📋 怪物詳細數據表

#### 🐺 野狼
| 屬性 | 數值 |
|------|------|
| 血量 | 30 |
| 攻擊力 | 8 |
| 防禦力 | 2 |
| 戰鬥獎勵 | 15金錢 |
| 逃跑訊息 | 野狼害怕你的氣勢，逃跑了 |

#### 🗿 石碑守護者  
| 屬性 | 數值 |
|------|------|
| 血量 | 40 |
| 攻擊力 | 12 |
| 防禦力 | 5 |
| 戰鬥獎勵 | 25金錢 |
| 逃跑訊息 | 石碑守護者回到了石碑中 |

#### 🏴‍☠️ 盜賊頭目
| 屬性 | 數值 |
|------|------|
| 血量 | 45 |
| 攻擊力 | 10 |
| 防禦力 | 3 |
| 戰鬥獎勵 | 30金錢 |
| 逃跑訊息 | 盜賊頭目見勢不妙，倉皇逃走 |

#### 👑 狼王
| 屬性 | 數值 |
|------|------|
| 血量 | 50 |
| 攻擊力 | 15 |
| 防禦力 | 4 |
| 戰鬥獎勵 | 40金錢 |
| 逃跑訊息 | 狼王發出一聲長嘯，消失在森林深處 |

#### ⚔️ 哥布林戰士
| 屬性 | 數值 |
|------|------|
| 血量 | 25 |
| 攻擊力 | 6 |
| 防禦力 | 1 |
| 戰鬥獎勵 | 20金錢 |
| 逃跑訊息 | 哥布林戰士驚慌失措地逃跑了 |

### 💰 戰鬥效益分析
- **金錢效率最高**：狼王 (40金錢)
- **最容易戰勝**：哥布林戰士 (25血量、1防禦) 
- **平衡之選**：野狼 (中等數值、穩定收益)
- **高風險高回報**：石碑守護者 (強大但獎勵豐厚)

### 🎯 戰鬥策略建議

#### 💡 新手策略
- **優先目標**：哥布林戰士、野狼
- **避免挑戰**：狼王、石碑守護者
- **血量管理**：戰鬥前確保血量在50%以上

#### ⚔️ 進階策略  
- **攻擊力投資**：提升攻擊力可大幅縮短戰鬥時間
- **防禦力價值**：每點防禦可顯著減少受到的傷害
- **30回合限制**：計算是否能在限制內擊敗敵人

#### 🧮 傷害計算公式
```
實際傷害 = 攻擊力 - 防禦力
最小傷害 = 1 (即使防禦力高於攻擊力)
預估回合數 = 怪物血量 ÷ 玩家實際傷害
```

### ⚠️ 戰鬥系統注意事項
- **無法逃跑**：戰鬥開始後必須戰至結束
- **自動戰鬥**：無需手動操作，每秒自動攻擊
- **視覺回饋**：觀察血量條變化判斷戰況
- **死亡重置**：玩家死亡會重新開始遊戲

## 🌟 強化事件系統

### 💪 生命值強化事件
這些事件會永久提升玩家的最大生命值：

| 事件名稱 | 最大血量 | 血量恢復 | 權重 | 稀有度 |
|---------|---------|---------|------|-------|
| 龍血寶石 | +30 | +50 | 1 | 極稀有 |
| 生命之樹 | +25 | 完全恢復 | 1 | 極稀有 |
| 生命精華 | +20 | +20 | 3 | 稀有 |
| 古老神廟 | +15 | +30 | 4 | 稀有 |

### ⚠️ 詛咒事件
- **惡魔契約**：減少最大血量10點，但恢復10點當前血量

## 🎯 戰略建議

### 💰 金錢累積策略
1. **積極戰鬥**：即使會受傷，敵人事件的金錢獎勵值得冒險
2. **風險管理**：血量過低時避免危險事件
3. **長期投資**：累積金錢用於生命值強化
4. **商店購物**：遇到友善商人時可購買補血道具和裝備

### 🏪 商店系統策略
1. **優先購買**：血量低時優先購買治療藥水
2. **投資裝備**：有餘錢時購買增加最大血量的裝備
3. **比較價格**：龍鱗盔甲雖然貴但性價比高
4. **保留資金**：不要花光所有錢，保留應急資金

## 🏪 商店系統詳解

### 🛒 友善商人事件
當遇到友善商人時，會觸發特殊的商店介面，玩家可以：
- 查看所有可購買的物品
- 根據當前金錢選擇購買
- 選擇離開商店繼續冒險

⚠️ **重要機制**：商人販賣的所有強化效果（最大血量、攻擊力、防禦力）都是**臨時的**，只在當局遊戲有效。死亡重新開始後會消失。只有「強化中心」的升級才是永久的！

### 🛍️ 商店商品列表

#### 💊 治療道具（即時效果）
| 商品名稱 | 價格 | 效果 | 推薦情況 |
|---------|------|------|---------|
| 治療藥水 | 15💰 | 恢復 30 點生命值 | 血量不足時 |
| 大型治療藥水 | 25💰 | 恢復 50 點生命值 | 血量嚴重不足時 |

#### 🗡️ 臨時強化裝備（當局有效）
| 商品名稱 | 價格 | 效果 | 持續性 |
|---------|------|------|-------|
| 生命護符 | 40💰 | 最大血量 +15 | ⚠️ 本局有效 |
| 龍鱗盔甲 | 60💰 | 最大血量 +25 | ⚠️ 本局有效 |
| 銳利武器 | 35💰 | 攻擊力 +2 | ⚠️ 本局有效 |
| 守護盾牌 | 35💰 | 防禦力 +2 | ⚠️ 本局有效 |

### 🎯 商店購買策略

#### 💡 購買優先級
1. **緊急情況** (血量 < 30%)：優先購買治療藥水
2. **當局需要更多血量**：考慮購買臨時最大血量裝備
3. **當局需要戰鬥力**：購買臨時攻擊力/防禦力裝備
4. **長期發展**：存錢去強化中心進行永久升級

#### 💰 金錢管理建議
- **保守策略**：保留金錢用於強化中心的永久升級
- **臨時策略**：當局遇到困難時購買臨時裝備應對
- **平衡策略**：優先永久提升，危急時刻使用臨時裝備
- **效率策略**：治療藥水最便宜，臨時裝備性價比中等
- **平衡策略**：先買便宜的治療道具，再存錢買裝備

### 🏷️ 商店互動機制
- **動態定價**：所有價格固定，不會變動
- **金錢檢查**：買不起的物品會顯示為灰色
- **即時更新**：購買後立即更新金錢和狀態
- **可重複購買**：同一次商店遭遇可購買多個物品
- **自由離開**：隨時可以選擇離開商店

### 🏥 血量管理
1. **保持血量**：低於30%時尋找恢復事件
2. **強化優先**：遇到生命精華等事件優先考慮
3. **計算風險**：評估戰鬥收益是否值得血量損失

## 🔧 開發者資訊

### 添加新事件
在 `gameEvents` 陣列中新增事件物件：

```javascript
{
    name: "新事件名稱",
    description: "事件描述，包含背景故事",
    effect: { 
        health: 10,          // 血量變化 (+恢復/-受傷)
        money: 20,           // 金錢獎勵 (敵人事件)
        maxHealth: 5,        // 最大血量變化 (強化事件)
        fullHeal: false,     // 是否完全恢復
        instantDeath: false, // 是否即死
        message: "效果說明文字" 
    },
    weight: 5               // 權重 (1-18)
}
```

### 權重建議
- **日常事件**：權重 15-18
- **戰鬥事件**：權重 8-12
- **特殊事件**：權重 4-6
- **強化事件**：權重 2-4
- **傳說事件**：權重 1

### 平衡性考量
- 敵人事件的金錢獎勵應該補償血量損失
- 強化事件稀有度要與效果成正比
- 總體來說玩家應該能夠穩定進步

這個事件系統為遊戲提供了豐富的隨機性和戰略深度！🎮

### 傳說事件 (權重 2-1)
11. **惡魔契約** (權重 2) - 最大血量 -10，恢復 +10 → 機率 ~1.9%
12. **龍血寶石** (權重 1) - 最大血量 +30，恢復 +50 → 機率 ~1.0%
13. **生命之樹** (權重 1) - 最大血量 +25，完全恢復 → 機率 ~1.0%
14. **死神的鐮刀** (權重 1) - 💀 即死事件 → 機率 ~1.0%

**總權重**: 104

## 🔧 如何添加新事件

1. 在 `gameEvents` 陣列中添加新的事件物件
2. 確保包含所有必要的屬性
3. 重新載入遊戲即可

### 示例：
```javascript
{
    name: "新事件名稱",
    description: "事件描述文字",
    effect: { 
        health: 10,           // 血量變化
        maxHealth: 5,         // 最大血量變化 (可選)
        fullHeal: false,      // 是否完全恢復 (可選)
        instantDeath: false,  // 是否即死 (可選)
        message: "效果訊息"    // 效果提示
    },
    weight: 10               // 權重 (1-20，數字越大越常見)
}
```

## ⚙️ 權重選擇機制

遊戲使用 `getRandomEventByWeight()` 函數：
1. 計算所有事件的總權重
2. 生成 0 到總權重之間的隨機數
3. 按權重順序遞減，選擇對應的事件
4. 確保每個事件都有機會被選中，但機率不同

## 📁 檔案載入順序

在 `index.html` 中的載入順序：
1. `events.js` - 事件資料庫
2. `game.js` - 主遊戲邏輯

這樣確保遊戲邏輯可以正確訪問事件資料。