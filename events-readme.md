# 事件資料庫檔案 (events.js)

這個檔案包含了遊戲中所有的事件資料，包括敵人戰鬥、寶物發現、強化機會等17種不同事件。

## 📋 事件結構

每個事件都包含以下屬性：
- `name`: 事件名稱
- `description`: 事件描述文字
- `effect`: 事件效果物件
  - `health`: 血量變化 (正數恢復，負數減少)
  - `money`: 金錢獎勵 (新增)
  - `maxHealth`: 最大血量變化 (可選)
  - `fullHeal`: 是否完全恢復血量 (可選)
  - `instantDeath`: 是否即死 (可選)
  - `message`: 效果提示訊息
- `weight`: 事件權重 (影響出現機率)

## ⚖️ 權重系統

權重系統決定每個事件的出現機率：
- **權重越高 = 出現機率越高**
- **權重越低 = 出現機率越低**
- 總權重 = 所有事件權重的總和
- 每個事件的機率 = 該事件權重 ÷ 總權重

### 權重分級
- **18-15**: 非常常見 (基礎事件)
- **14-10**: 常見 (一般事件)
- **9-6**: 中等 (特殊事件)
- **5-3**: 稀有 (強化事件)
- **2-1**: 極稀有 (傳說事件)

## 🎮 完整事件列表 (17種)

### 基礎事件 (權重 18-12)
1. **陷阱** (權重 18) - 減少血量 -15 → 機率 ~16.8%
2. **找到寶箱** (權重 15) - 恢復血量 +20 → 機率 ~14.0%
3. **毒霧** (權重 14) - 減少血量 -20 → 機率 ~13.1%
4. **遭遇怪物** (權重 12) - 減少血量 -30，**獲得 15 金錢** → 機率 ~11.2%

### 一般事件 (權重 10-6)
5. **友善商人** (權重 10) - 恢復血量 +25 → 機率 ~9.3%
6. **詛咒石碑** (權重 9) - 減少血量 -25，**獲得 12 金錢** → 機率 ~8.4%
7. **魔法泉水** (權重 8) - 完全恢復血量 → 機率 ~7.5%
8. **盜賊襲擊** (權重 8) - 減少血量 -20，**獲得 25 金錢** → 機率 ~7.5%
9. **野狼群** (權重 7) - 減少血量 -35，**獲得 10 金錢** → 機率 ~6.5%
10. **聖光祝福** (權重 6) - 恢復血量 +35 → 機率 ~5.6%

### 特殊事件 (權重 5-3)
11. **哥布林商隊** (權重 5) - 減少血量 -15，**獲得 30 金錢** → 機率 ~4.7%
12. **古老神廟** (權重 4) - 最大血量 +15，恢復 +30 → 機率 ~3.7%
13. **生命精華** (權重 3) - 最大血量 +20，恢復 +20 → 機率 ~2.8%

### 稀有事件 (權重 2-1)
14. **龍族幼崽** (權重 2) - 恢復血量 +10，**獲得 50 金錢** → 機率 ~1.9%
15. **惡魔契約** (權重 2) - 最大血量 -10，恢復 +10 → 機率 ~1.9%
16. **生命之樹** (權重 1) - 最大血量 +25，完全恢復血量 → 機率 ~0.9%
17. **死神的鐮刀** (權重 1) - **即死** → 機率 ~0.9%

## 💰 金錢系統事件

### 💸 敵人事件 (掉落金錢)
以下敵人事件會在戰鬥後給予金錢獎勵：

| 事件名稱 | 血量變化 | 金錢獎勵 | 權重 | 機率 |
|---------|---------|---------|------|------|
| 遭遇怪物 | -30 | +15 | 12 | 11.2% |
| 詛咒石碑 | -25 | +12 | 9 | 8.4% |
| 盜賊襲擊 | -20 | +25 | 8 | 7.5% |
| 野狼群 | -35 | +10 | 7 | 6.5% |
| 哥布林商隊 | -15 | +30 | 5 | 4.7% |
| 龍族幼崽 | +10 | +50 | 2 | 1.9% |

### 📊 金錢效率分析
- **最佳風險回報比**：哥布林商隊 (15血量換30金錢)
- **最高獎勵**：龍族幼崽 (50金錢且恢復血量)
- **最常見收益**：遭遇怪物 (30血量換15金錢)

## 🌟 強化事件系統

### 💪 生命值強化事件
這些事件會永久提升玩家的最大生命值：

| 事件名稱 | 最大血量 | 血量恢復 | 權重 | 稀有度 |
|---------|---------|---------|------|-------|
| 龍血寶石 | +30 | +50 | 1 | 極稀有 |
| 生命之樹 | +25 | 完全恢復 | 1 | 極稀有 |
| 生命精華 | +20 | +20 | 3 | 稀有 |
| 古老神廟 | +15 | +30 | 4 | 稀有 |

### ⚠️ 詛咒事件
- **惡魔契約**：減少最大血量10點，但恢復10點當前血量

## 🎯 戰略建議

### 💰 金錢累積策略
1. **積極戰鬥**：即使會受傷，敵人事件的金錢獎勵值得冒險
2. **風險管理**：血量過低時避免危險事件
3. **長期投資**：累積金錢用於生命值強化

### 🏥 血量管理
1. **保持血量**：低於30%時尋找恢復事件
2. **強化優先**：遇到生命精華等事件優先考慮
3. **計算風險**：評估戰鬥收益是否值得血量損失

## 🔧 開發者資訊

### 添加新事件
在 `gameEvents` 陣列中新增事件物件：

```javascript
{
    name: "新事件名稱",
    description: "事件描述，包含背景故事",
    effect: { 
        health: 10,          // 血量變化 (+恢復/-受傷)
        money: 20,           // 金錢獎勵 (敵人事件)
        maxHealth: 5,        // 最大血量變化 (強化事件)
        fullHeal: false,     // 是否完全恢復
        instantDeath: false, // 是否即死
        message: "效果說明文字" 
    },
    weight: 5               // 權重 (1-18)
}
```

### 權重建議
- **日常事件**：權重 15-18
- **戰鬥事件**：權重 8-12
- **特殊事件**：權重 4-6
- **強化事件**：權重 2-4
- **傳說事件**：權重 1

### 平衡性考量
- 敵人事件的金錢獎勵應該補償血量損失
- 強化事件稀有度要與效果成正比
- 總體來說玩家應該能夠穩定進步

這個事件系統為遊戲提供了豐富的隨機性和戰略深度！🎮

### 傳說事件 (權重 2-1)
11. **惡魔契約** (權重 2) - 最大血量 -10，恢復 +10 → 機率 ~1.9%
12. **龍血寶石** (權重 1) - 最大血量 +30，恢復 +50 → 機率 ~1.0%
13. **生命之樹** (權重 1) - 最大血量 +25，完全恢復 → 機率 ~1.0%
14. **死神的鐮刀** (權重 1) - 💀 即死事件 → 機率 ~1.0%

**總權重**: 104

## 🔧 如何添加新事件

1. 在 `gameEvents` 陣列中添加新的事件物件
2. 確保包含所有必要的屬性
3. 重新載入遊戲即可

### 示例：
```javascript
{
    name: "新事件名稱",
    description: "事件描述文字",
    effect: { 
        health: 10,           // 血量變化
        maxHealth: 5,         // 最大血量變化 (可選)
        fullHeal: false,      // 是否完全恢復 (可選)
        instantDeath: false,  // 是否即死 (可選)
        message: "效果訊息"    // 效果提示
    },
    weight: 10               // 權重 (1-20，數字越大越常見)
}
```

## ⚙️ 權重選擇機制

遊戲使用 `getRandomEventByWeight()` 函數：
1. 計算所有事件的總權重
2. 生成 0 到總權重之間的隨機數
3. 按權重順序遞減，選擇對應的事件
4. 確保每個事件都有機會被選中，但機率不同

## 📁 檔案載入順序

在 `index.html` 中的載入順序：
1. `events.js` - 事件資料庫
2. `game.js` - 主遊戲邏輯

這樣確保遊戲邏輯可以正確訪問事件資料。